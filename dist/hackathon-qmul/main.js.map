{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/audio/audio.component.css","webpack:///./src/app/audio/audio.component.html","webpack:///./src/app/audio/audio.component.ts","webpack:///./src/app/canvas-controls/canvas-controls.component.css","webpack:///./src/app/canvas-controls/canvas-controls.component.html","webpack:///./src/app/canvas-controls/canvas-controls.component.ts","webpack:///./src/app/canvas/canvas.component.css","webpack:///./src/app/canvas/canvas.component.html","webpack:///./src/app/canvas/canvas.component.ts","webpack:///./src/app/classes/zone.ts","webpack:///./src/app/image/image.component.css","webpack:///./src/app/image/image.component.html","webpack:///./src/app/image/image.component.ts","webpack:///./src/app/interaction/interaction.component.css","webpack:///./src/app/interaction/interaction.component.html","webpack:///./src/app/interaction/interaction.component.ts","webpack:///./src/app/magic-glass/magic-glass.component.css","webpack:///./src/app/magic-glass/magic-glass.component.html","webpack:///./src/app/magic-glass/magic-glass.component.ts","webpack:///./src/app/portal/portal.component.css","webpack:///./src/app/portal/portal.component.html","webpack:///./src/app/portal/portal.component.ts","webpack:///./src/app/services/data.service.ts","webpack:///./src/app/services/drawing.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AppComponent } from './app.component';\nimport { PortalComponent } from './portal/portal.component';\nimport { InteractionComponent } from './interaction/interaction.component';\nimport { HashLocationStrategy, LocationStrategy } from '@angular/common';\n\n\nconst routes: Routes = [\n     {path:'interaction/:map/:zone', component: InteractionComponent},\n    {path:'interaction/:map', component: InteractionComponent},\n    {path:'portal', component: PortalComponent}, \n    {path:'./', component: PortalComponent} \n   \n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, {onSameUrlNavigation: 'reload'})],\n  exports: [RouterModule],\n    providers:[{provide: LocationStrategy, useClass: HashLocationStrategy}]\n})\nexport class AppRoutingModule { }\n","module.exports = \"* {box-sizing: border-box}\\r\\nhtml,body {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    background-color: black;\\r\\n    padding: 0;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2FwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEdBQUcsc0JBQXNCO0FBQ3pCO0lBQ0ksV0FBVztJQUNYLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsT0FBTztJQUNQLE1BQU07SUFDTix1QkFBdUI7SUFDdkIsVUFBVTtBQUNkIiwiZmlsZSI6Ii4uL2FwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiKiB7Ym94LXNpemluZzogYm9yZGVyLWJveH1cclxuaHRtbCxib2R5IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHRvcDogMDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgcGFkZGluZzogMDtcclxufSJdfQ== */\"","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\n\\n\\n<html>\\n    <body>\\n        <router-outlet></router-outlet>\\n    </body>\\n\\n</html>\\n\"","import { Component, OnInit } from '@angular/core';\n\n\n//import { Islide } from '../Islide';\n\n\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  title = 'Images';\n    \n    \n\n    \n    constructor(){\n        \n    }\n    \n    ngOnInit() {\n \n\n  }    \n    \n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { CanvasComponent } from './canvas/canvas.component';\nimport { PortalComponent } from './portal/portal.component';\nimport { ImageComponent } from './image/image.component';\nimport { InteractionComponent } from './interaction/interaction.component';\n//import { ControlsComponent } from './controls/controls.component';\nimport { AudioComponent } from './audio/audio.component';\nimport { CanvasControlsComponent } from './canvas-controls/canvas-controls.component';\n\nimport { NgxYoutubePlayerModule } from 'ngx-youtube-player';\nimport {MatSliderModule} from '@angular/material/slider';\nimport { MagicGlassComponent } from './magic-glass/magic-glass.component'; \n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    CanvasComponent,\n    PortalComponent,\n    ImageComponent,\n    InteractionComponent,\n   // ControlsComponent,\n    AudioComponent,\n   CanvasControlsComponent,\n   MagicGlassComponent\n  ],\n    \n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n      HttpClientModule,\n      NgxYoutubePlayerModule.forRoot(),\n      MatSliderModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","module.exports = \"\\r\\n\\r\\naudio{    width: 90px;\\r\\n    height: 30px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2F1ZGlvL2F1ZGlvLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxVQUFVLFdBQVc7SUFDakIsWUFBWTtBQUNoQiIsImZpbGUiOiIuLi9hdWRpby9hdWRpby5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG5hdWRpb3sgICAgd2lkdGg6IDkwcHg7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbn0iXX0= */\"","module.exports = \"<youtube-player\\n          [videoId]=\\\"youTubeId\\\"\\n          (ready)=\\\"saveYT($event)\\\"\\n          (change)=\\\"changeYT($event)\\\"\\n                 width=\\\"200\\\" height=\\\"100\\\"\\n       >\\n        </youtube-player>\\n\\n\\n<div id=audio>\\n     <audio id=music controls #music>\\n        <source id=song [src]=\\\"songUrl\\\" type=\\\"audio/mpeg\\\" #song>\\n    </audio>\\n    \\n     <audio id=voice controls #voice>\\n        <source id=comment [src]=\\\"commentUrl\\\" type=\\\"audio/mpeg\\\" #comment>\\n    </audio>\\n    \\n    \\n\"","import { Component, AfterViewInit, OnChanges, ViewChild, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'app-audio',\n  templateUrl: './audio.component.html',\n  styleUrls: ['./audio.component.css']\n})\nexport class AudioComponent implements AfterViewInit {\n     @ViewChild(\"music\") music;\n     @ViewChild(\"song\") song;\n     @ViewChild(\"voice\") voice;\n     @ViewChild(\"comment\") comment;\n   youTube: any;\n   @Input(\"youTubeId\") youTubeId : string;\n    \n    @Input(\"songUrl\") songUrl: string;\n    @Input(\"playing\") playing: boolean;\n     @Input(\"mode\") mode: string;\n     @Input(\"commentUrl\") commentUrl: string;\n    \n     @Output() canPlay = new EventEmitter<string>();\n\n\n  constructor() {}\n\n\n  ngAfterViewInit() {\n      let ref=this;\n      \n      \n    this.music.nativeElement.oncanplay = function() {\n       console.log(\"player ready\");\n    ref.canPlay.emit(\"ready\");\n};\n      \n         if(this.songUrl){\n          this.song.nativeElement.src=this.songUrl;\n                console.log(\"loading song\");\n             this.music.nativeElement.load();\n          if(this.playing){\n          \n          this.music.nativeElement.play();\n      }\n      }\n      \n\n  \n      \n   \n  }\n    \n     ngOnChanges() {\n       \n         if(this.youTubeId){\n            this.youTube.loadVideoById(this.youTubeId);\n             this.music.nativeElement.pause();\n           this.youTube.playVideo();\n              \n         }\n           \n         \n       //   console.log(\"PLAY: \" + this.mode);\n         \n      if(this.songUrl && (this.playing || this.mode==\"interaction\")){\n          console.log(\"loading song\");\n          this.music.nativeElement.load();\n          this.youTube.stopVideo();\n          this.youTubeId=\"\";\n          this.youTube.clearVideo();\n         this.music.nativeElement.play();\n      }\n  }\n    \n    saveYT(yt){\n        console.log(\"saving YT\");\n        this.youTube=yt;\n      //  this.youTube.playVideo();\n      \n    }\n    \n     changeYT(e){\n         console.log(\"YT message\");\n       //console.log(this.youTube);\n         //this.youTube.playVideo();\n          \n    }\n\n\n}\n","module.exports = \"#wrapper{\\r\\n    display: -webkit-box;\\r\\n    display: flex;\\r\\n    -webkit-box-orient: horizontal;\\r\\n    -webkit-box-direction: normal;\\r\\n            flex-flow: row nowrap;\\r\\n    -webkit-box-align: center;\\r\\n            align-items: center;\\r\\n    width: 100%;\\r\\n    -webkit-box-pack: start;\\r\\n            justify-content: flex-start;\\r\\n}\\r\\n\\r\\n#zoom{\\r\\n    padding: .4rem;\\r\\n    margin: 0.2em;\\r\\n    display: -webkit-inline-box;\\r\\n    display: inline-flex;\\r\\n    color: black;\\r\\n    min-width: 2em;\\r\\n    -webkit-box-orient: horizontal;\\r\\n    -webkit-box-direction: normal;\\r\\n            flex-flow: row nowrap;\\r\\n    -webkit-box-align: center;\\r\\n            align-items: center;\\r\\n    color:white;\\r\\n}\\r\\n\\r\\n#zoom button{\\r\\n    color:white;\\r\\n    background-color:black;\\r\\n    border-radius:0.5em;\\r\\n    font-weight:bold;\\r\\n}\\r\\n\\r\\n#zoomToFit{\\r\\n    background-image:url(\\\"/assets/images/graphics/arrow_back.png\\\");\\r\\n    width:1.5em;\\r\\n    height:2em;\\r\\n        background-repeat: no-repeat;\\r\\n    background-size: 100% 100%;\\r\\n}\\r\\n\\r\\n.dspButton{\\r\\n    border-radius: 50%;\\r\\n    width:1em;\\r\\n    height: 1em;\\r\\n    margin:0.25em;\\r\\n  \\r\\n}\\r\\n\\r\\n.showButton{\\r\\n    background-color:black;\\r\\n}\\r\\n\\r\\n.hideButton{\\r\\n    background-color:white;\\r\\n}\\r\\n\\r\\n.categorySwitch{\\r\\n margin-left:1em;\\r\\n    padding-left:0.5em;\\r\\n    border-left: 2px solid white;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NhbnZhcy1jb250cm9scy9jYW52YXMtY29udHJvbHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLG9CQUFhO0lBQWIsYUFBYTtJQUNiLDhCQUFxQjtJQUFyQiw2QkFBcUI7WUFBckIscUJBQXFCO0lBQ3JCLHlCQUFtQjtZQUFuQixtQkFBbUI7SUFDbkIsV0FBVztJQUNYLHVCQUEyQjtZQUEzQiwyQkFBMkI7QUFDL0I7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsYUFBYTtJQUNiLDJCQUFvQjtJQUFwQixvQkFBb0I7SUFDcEIsWUFBWTtJQUNaLGNBQWM7SUFDZCw4QkFBcUI7SUFBckIsNkJBQXFCO1lBQXJCLHFCQUFxQjtJQUNyQix5QkFBbUI7WUFBbkIsbUJBQW1CO0lBQ25CLFdBQVc7QUFDZjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxzQkFBc0I7SUFDdEIsbUJBQW1CO0lBQ25CLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLDhEQUE4RDtJQUM5RCxXQUFXO0lBQ1gsVUFBVTtRQUNOLDRCQUE0QjtJQUNoQywwQkFBMEI7QUFDOUI7O0FBR0E7SUFDSSxrQkFBa0I7SUFDbEIsU0FBUztJQUNULFdBQVc7SUFDWCxhQUFhOztBQUVqQjs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtDQUNDLGVBQWU7SUFDWixrQkFBa0I7SUFDbEIsNEJBQTRCO0FBQ2hDIiwiZmlsZSI6Ii4uL2NhbnZhcy1jb250cm9scy9jYW52YXMtY29udHJvbHMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiN3cmFwcGVye1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcclxufVxyXG5cclxuI3pvb217XHJcbiAgICBwYWRkaW5nOiAuNHJlbTtcclxuICAgIG1hcmdpbjogMC4yZW07XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIG1pbi13aWR0aDogMmVtO1xyXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGNvbG9yOndoaXRlO1xyXG59XHJcblxyXG4jem9vbSBidXR0b257XHJcbiAgICBjb2xvcjp3aGl0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6YmxhY2s7XHJcbiAgICBib3JkZXItcmFkaXVzOjAuNWVtO1xyXG4gICAgZm9udC13ZWlnaHQ6Ym9sZDtcclxufVxyXG5cclxuI3pvb21Ub0ZpdHtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6dXJsKFwiL2Fzc2V0cy9pbWFnZXMvZ3JhcGhpY3MvYXJyb3dfYmFjay5wbmdcIik7XHJcbiAgICB3aWR0aDoxLjVlbTtcclxuICAgIGhlaWdodDoyZW07XHJcbiAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlO1xyXG59XHJcblxyXG5cclxuLmRzcEJ1dHRvbntcclxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgIHdpZHRoOjFlbTtcclxuICAgIGhlaWdodDogMWVtO1xyXG4gICAgbWFyZ2luOjAuMjVlbTtcclxuICBcclxufVxyXG5cclxuLnNob3dCdXR0b257XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrO1xyXG59XHJcblxyXG4uaGlkZUJ1dHRvbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6d2hpdGU7XHJcbn1cclxuXHJcbi5jYXRlZ29yeVN3aXRjaHtcclxuIG1hcmdpbi1sZWZ0OjFlbTtcclxuICAgIHBhZGRpbmctbGVmdDowLjVlbTtcclxuICAgIGJvcmRlci1sZWZ0OiAycHggc29saWQgd2hpdGU7XHJcbn0iXX0= */\"","module.exports = \"<div id=\\\"wrapper\\\">\\n\\n<div id=\\\"zoom\\\" role=\\\"group\\\" aria-label=\\\"Manuscript zoom\\\">\\n    {{opacityRatio}}\\n            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" id=\\\"zoomIn\\\" (click)=\\\"zoomChng(0.1)\\\">\\n              +\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" id=\\\"zoomOut\\\" (click)=\\\"zoomChng(-0.1)\\\">\\n              -\\n            </button>\\n\\n\\n        \\n     <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" id=\\\"zoomToFit\\\" (click)=\\\"zoomChng(fitZoom-zoom)\\\" *ngIf=\\\"zoom>fitZoom\\\">\\n             \\n            </button>\\n          </div>\\n    <ng-container  *ngFor=\\\"let zc of zoneCategories\\\" >\\n    <span class=categorySwitch *ngIf=\\\"zc.name!='Mrak'\\\">\\n        <button class=\\\"dspButton\\\" (click)=\\\"zc.selected=!zc.selected; selectionChng()\\\" [ngClass]=\\\"zc.selected ? 'hideButton' : 'showButton'\\\"></button>\\n        {{zc.name}} ({{zc.zoneCount}})\\n    \\n    </span>\\n    </ng-container>\\n    \\n    \\n    \\n    <input type=\\\"range\\\" min=0 max=1 step=0.1 (change)=\\\"opacityChng($event)\\\">\\n</div>  \\n\\n\\n\"","import { Component, OnInit, Output, Input, EventEmitter } from '@angular/core';\nimport { ZoneCategory } from '../interfaces/zone-category';\n\n\n@Component({\n  selector: 'app-canvas-controls',\n  templateUrl: './canvas-controls.component.html',\n  styleUrls: ['./canvas-controls.component.css']\n})\nexport class CanvasControlsComponent implements OnInit {\n\n    @Output() changeZoom = new EventEmitter<number>(); \n    @Output() changeSelection = new EventEmitter<any>(); \n    @Output() changeOpacity = new EventEmitter<any>(); \n     @Input(\"zoom\") zoom : number;\n     @Input(\"fitZoom\") fitZoom : number;\n     @Input(\"opacityRatio\") opacityRatio : number;\n     @Input(\"zoneCategories\") zoneCategories : ZoneCategory[];\n    \n  constructor() { }\n\n  ngOnInit() {\n  }\n    \n    zoomChng(value){\n        this.changeZoom.emit(value);\n        \n    }\n    \n    selectionChng(){\n        \n        let selected = {};\n        this.zoneCategories.forEach((zc)=>selected[zc.name] = zc.selected);\n        \n        this.changeSelection.emit(selected);\n        \n    }\n    \n     opacityChng(e){\n        console.log(e.srcElement.value);\n          this.changeOpacity.emit(e.srcElement.value);\n         \n    }\n\n}\n","module.exports = \"*{box-sizing:boder-box}\\r\\n\\r\\n#msCanvas, manuscript{-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s, -webkit-transform .5s; -webkit-transition: background-image .5x; transition: background-image .5x; -webkit-transform-origin:center center; transform-origin:center center}\\r\\n\\r\\n#msCanvas,#interactiveCanvas, #animationCanvas{position:absolute;-webkit-transform-origin:top left;transform-origin:top left;-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s, -webkit-transform .5s; \\r\\n}\\r\\n\\r\\n#msWrapper{position:absolute;\\r\\n    overflow:scroll;\\r\\n\\r\\nbackground-color: rgb(20,20,20);\\r\\n  /*  background-image:url(\\\"https://www.draconica.net/ft2019/wp-content/uploads/sites/21/2019/02/bg3.jpg\\\");*/\\r\\nwidth: 98%;\\r\\nheight: 98%;\\r\\nmargin: 0.1em;}\\r\\n\\r\\napp-canvas-controls{\\r\\n    background-color:transparent;\\r\\n    width:100%;\\r\\n    height:5%;\\r\\n    position:fixed;\\r\\n    top:0;\\r\\n    left:0.5%;\\r\\n    color:white;\\r\\n}\\r\\n\\r\\n#manuscript{border: 1px solid black;\\r\\nwidth: 100%;\\r\\nheight: 100%;\\r\\nposition: absolute;\\r\\n    background-color:black;\\r\\nleft:0%;\\r\\ntop:0}\\r\\n\\r\\n/* CUSTOM SCROLLBAR */\\r\\n\\r\\n::-webkit-scrollbar {\\r\\n    width: 11px;\\r\\n    height: 11px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-button {\\r\\n    width: 0px;\\r\\n    height: 0px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb {\\r\\n    background: rgb(20,20,20);\\r\\n    border: 2px solid #ffffff;\\r\\n    border-radius: 50px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb:hover {\\r\\n    background: #ffffff;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb:active {\\r\\n    background: #000000;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track {\\r\\n    background: rgb(20,20,20);\\r\\n    border: 0px none #ffffff;\\r\\n    border-radius: 39px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track:hover {\\r\\n    background: rgb(20,20,20);\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track:active {\\r\\n    background: rgb(20,20,20);\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-corner {\\r\\n    background: transparent;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NhbnZhcy9jYW52YXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxFQUFFLG9CQUFvQjs7QUFFdEIsc0JBQXNCLHdDQUF3QixDQUF4QixnQ0FBd0IsQ0FBeEIsd0JBQXdCLENBQXhCLCtDQUF3QixFQUFFLHdDQUFnQyxFQUFoQyxnQ0FBZ0MsRUFBRSxzQ0FBNkIsRUFBN0IsOEJBQThCOztBQUdoSCwrQ0FBK0MsaUJBQWlCLENBQUMsaUNBQXlCLENBQXpCLHlCQUF5QixDQUFDLHdDQUF3QixDQUF4QixnQ0FBd0IsQ0FBeEIsd0JBQXdCLENBQXhCLCtDQUF3QjtBQUNuSDs7QUFDQSxXQUFXLGlCQUFpQjtJQUN4QixlQUFlOztBQUVuQiwrQkFBK0I7RUFDN0IsMEdBQTBHO0FBQzVHLFVBQVU7QUFDVixXQUFXO0FBQ1gsYUFBYSxDQUFDOztBQUlkO0lBQ0ksNEJBQTRCO0lBQzVCLFVBQVU7SUFDVixTQUFTO0lBQ1QsY0FBYztJQUNkLEtBQUs7SUFDTCxTQUFTO0lBQ1QsV0FBVztBQUNmOztBQUVBLFlBQVksdUJBQXVCO0FBQ25DLFdBQVc7QUFDWCxZQUFZO0FBQ1osa0JBQWtCO0lBQ2Qsc0JBQXNCO0FBQzFCLE9BQU87QUFDUCxLQUFLOztBQUdMLHFCQUFxQjs7QUFFckI7SUFDSSxXQUFXO0lBQ1gsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFVBQVU7SUFDVixXQUFXO0FBQ2Y7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIseUJBQXlCO0lBQ3pCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6Qix3QkFBd0I7SUFDeEIsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCIiwiZmlsZSI6Ii4uL2NhbnZhcy9jYW52YXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIip7Ym94LXNpemluZzpib2Rlci1ib3h9XHJcblxyXG4jbXNDYW52YXMsIG1hbnVzY3JpcHR7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjVzOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWltYWdlIC41eDsgdHJhbnNmb3JtLW9yaWdpbjpjZW50ZXIgY2VudGVyfVxyXG5cclxuXHJcbiNtc0NhbnZhcywjaW50ZXJhY3RpdmVDYW52YXMsICNhbmltYXRpb25DYW52YXN7cG9zaXRpb246YWJzb2x1dGU7dHJhbnNmb3JtLW9yaWdpbjp0b3AgbGVmdDt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuNXM7IFxyXG59XHJcbiNtc1dyYXBwZXJ7cG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICBvdmVyZmxvdzpzY3JvbGw7XHJcblxyXG5iYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjAsMjAsMjApO1xyXG4gIC8qICBiYWNrZ3JvdW5kLWltYWdlOnVybChcImh0dHBzOi8vd3d3LmRyYWNvbmljYS5uZXQvZnQyMDE5L3dwLWNvbnRlbnQvdXBsb2Fkcy9zaXRlcy8yMS8yMDE5LzAyL2JnMy5qcGdcIik7Ki9cclxud2lkdGg6IDk4JTtcclxuaGVpZ2h0OiA5OCU7XHJcbm1hcmdpbjogMC4xZW07fVxyXG5cclxuXHJcblxyXG5hcHAtY2FudmFzLWNvbnRyb2xze1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtcclxuICAgIHdpZHRoOjEwMCU7XHJcbiAgICBoZWlnaHQ6NSU7XHJcbiAgICBwb3NpdGlvbjpmaXhlZDtcclxuICAgIHRvcDowO1xyXG4gICAgbGVmdDowLjUlO1xyXG4gICAgY29sb3I6d2hpdGU7XHJcbn1cclxuXHJcbiNtYW51c2NyaXB0e2JvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xyXG53aWR0aDogMTAwJTtcclxuaGVpZ2h0OiAxMDAlO1xyXG5wb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrO1xyXG5sZWZ0OjAlO1xyXG50b3A6MH1cclxuXHJcblxyXG4vKiBDVVNUT00gU0NST0xMQkFSICovXHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICAgIHdpZHRoOiAxMXB4O1xyXG4gICAgaGVpZ2h0OiAxMXB4O1xyXG59XHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyLWJ1dHRvbiB7XHJcbiAgICB3aWR0aDogMHB4O1xyXG4gICAgaGVpZ2h0OiAwcHg7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkICNmZmZmZmY7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xyXG59XHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6YWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQ6ICMwMDAwMDA7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxuICAgIGJvcmRlcjogMHB4IG5vbmUgI2ZmZmZmZjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDM5cHg7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2s6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxufVxyXG5cclxuOjotd2Via2l0LXNjcm9sbGJhci10cmFjazphY3RpdmUge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxufVxyXG5cclxuOjotd2Via2l0LXNjcm9sbGJhci1jb3JuZXIge1xyXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbn1cclxuIl19 */\"","module.exports = \"\\n      {{title}}\\n<div id=manuscript #manuscript>\\n            <div id=\\\"msWrapper\\\" #msWrapper [style.overflow]=\\\"mode=='interaction' ? 'scroll':'hidden'\\\">\\n          <canvas #msCanvas id=msCanvas [style.opacity]=1-opacityRatio [attr.width]=\\\"imgData.width\\\" [attr.height]=\\\"imgData.height\\\" style=\\\"border:2px solid black;\\n            background-color:transparent'); background-image:url('')\\\" draggable ></canvas>\\n                <canvas #animationCanvas id=animationCanvas  [attr.width]=\\\"imgData.width\\\" [attr.height]=\\\"imgData.height\\\" style=\\\"border:2px solid black;\\n            background-color:transparent'); background-image:url('')\\\" draggable ></canvas>\\n             <canvas #interactiveCanvas  [style.opacity]=opacityRatio id=interactiveCanvas  [attr.width]=\\\"imgData.width\\\" [attr.height]=\\\"imgData.height\\\"  style=\\\"border:2px solid black;\\n            background-color:transparent'); background-image:url('')\\\" draggable (document:mousemove)=\\\"locatePolygon($event, ctx, false)\\\" (click)=\\\"locatePolygon($event, ctx, true)\\\">\\n                   \\n                </canvas>    \\n            \\n                 <app-canvas-controls *ngIf=\\\"mode=='interaction'\\\" [opacityRatio]=opacityRatio [zoom]=\\\"zoom\\\" [fitZoom]=\\\"fitZoom\\\" [zoneCategories]=\\\"zoneCategories\\\" (changeZoom)=\\\"zoomChng($event)\\\" (changeSelection)=\\\"redrawSelected($event)\\\"  (changeOpacity)=\\\"opacityChng($event)\\\" ></app-canvas-controls>\\n                \\n                 <app-magic-glass #magicglass></app-magic-glass>\\n                \\n            </div>\\n     \\n\\n      </div>  \\n \\n\\n   \"","import { Component, OnInit, AfterViewInit, ViewChild, Input, Output, EventEmitter, OnChanges } from '@angular/core';\nimport { DrawingSvc } from '../services/drawing.service';\nimport { ImgData } from '../interfaces/img-data';\nimport { SlideConfig } from '../interfaces/slide-config';\nimport { Point } from '../interfaces/point';\nimport { ZoneCategory } from '../interfaces/zone-category';\nimport { Zone } from '../classes/zone';\n\n\n\n@Component({\n  selector: 'app-canvas',\n  templateUrl: './canvas.component.html',\n  styleUrls: ['./canvas.component.css'],\n    providers:[DrawingSvc]\n})\nexport class CanvasComponent implements OnInit, OnChanges, AfterViewInit {\n     @ViewChild(\"magicglass\") magicGlass;\n     @ViewChild(\"msWrapper\") wrapper;\n     @ViewChild(\"manuscript\") outer;\n    @ViewChild(\"msCanvas\") canvas;\n     @ViewChild(\"interactiveCanvas\") interaction;\n    @ViewChild(\"animationCanvas\") animation;\n    @ViewChild(\"les\") les;\n    @Input(\"zones\") zones: any;\n     @Input(\"zoneCategories\") zoneCategories : any;\n    @Input(\"imgData\") imgData: ImgData;\n    @Input(\"mode\") mode: string;\n    @Input(\"startTime\") startTime: number;\n    @Input(\"slideConfig\") slideConfig: SlideConfig;\n   // @Input(\"slideZoom\") slideZoom: number;\n    @Output() clicked = new EventEmitter<string>();\n    drawing : DrawingSvc;\n    title: string;\n    bgImage: string;\n    zoom:number;\n    fitZoom : number;\n    selectedZone : Zone;\n    displayedZones : Zone[] = [];\n    \n    ctx: any;\n    interCtx: any;\n    animCtx: any;\n    \n    opacityRatio:number = 1;\n    \n    \n\n  constructor (private _drawingSvc : DrawingSvc) { \n   this.zoom=1;\n    this.fitZoom = 0.4;\n      \n\n  }\n    \n\nngOnInit() {\n   // console.log(\"--CANVAS--ON INIT--\");\nthis.magicGlass.transcription=\"\";\n  }    \n    \n    \n    ngAfterViewInit(){\n     //  console.log(\"--CANVAS--AFTER VIEW INIT--\");\n    this.ctx=this.canvas.nativeElement.getContext(\"2d\");\n     this.interCtx=this.interaction.nativeElement.getContext(\"2d\");\n      this.animCtx=this.animation.nativeElement.getContext(\"2d\");\n         //  let zones = this.zones.filter((z)=>z.category==\"Území\");\n          this.displayedZones = this.zones;\n        console.log(this.zones);\n      this.processZones(this.displayedZones);\n                     }\n    \n\n ngOnChanges() {\n     console.log(this.zones);\n //  console.log(\"--CANVAS--ON CHANGES--\");\n     if(this.imgData){\n           this.bgImage=this.imgData.url;\n    this.canvas.nativeElement.style.backgroundImage=\"url(\"+this.bgImage+\")\";\n          this.interaction.nativeElement.style.backgroundImage=\"url(\"+this.imgData.url2+\")\";\n     this.zoom=this.calcZoomToFit();\n    this.fitZoom=this.zoom;\n     this.scaleCanvas([this.canvas, this.interaction, this.animation],this.wrapper, this.outer,this.zoom, this.fitZoom,{x:0,y:0});\n     \n     }\n   \n  \n     \n  if(this.ctx && this.interCtx && this.animCtx){\n   this.displayedZones = this.zones;\n      this.processZones(this.displayedZones);\n  }\n  }\n   \n    \nprocessZones(zones){\n    \n    console.log(zones);\n    if(this.mode==\"interaction\"){\n        this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height);\n    }\n    \n     this.animCtx.clearRect(0,0,this.interaction.nativeElement.width,this.interaction.nativeElement.height);\n    this._drawingSvc.animations=[];\n     \n   zones.forEach((zone)=>{\n    //    console.log(\"canvas drawing zones: \");\n      //  console.log(zone);\n        \n        \n            if(zone.category==\"Slide\" || this.mode==\"presentation\"){\n              //  console.log(\"adding to animations\");\n            //    console.log(zone);\n             //   this._drawingSvc.animations.push({img:zone.img,imgCoords:zone.imgCoords,cat:zone.cat, source:zone.fields.icon.value, destination:zone.fields.destination.value.split(\",\"),shift:[<number>0,<number>0] });\n                this._drawingSvc.animations=this._drawingSvc.animations.concat(zone.addToAnimations(this.canvas, this.zoom));\n            }else{\n                zone.draw(this.ctx);\n            }\n        \n    });\n     \nif(this._drawingSvc.animations.length>0){\n    \n    // this.canvas.nativeElement.style.transition=\"transform \"+this.slideConfig.duration/1000+\"s\";\n    // this.interaction.nativeElement.style.transition=\"transform \"+this.slideConfig.duration/1000+\"s\";\n    // this.animation.nativeElement.style.transition=\"transform \"+this.slideConfig.duration/1000+\"s\";\n    \n    // this.scaleCanvas([this.canvas,  this.animation], this.wrapper, this.outer, this.fitZoom*this.slideConfig.zoom, this.fitZoom, this.slideConfig.translate);\n    \n//console.log(\"RUNNING ANIMATIONS\");\n //   console.log(this._drawingSvc.animations);\n    this._drawingSvc.animationStage=0;\n    //this.zoomChng(0.2);\n    \n   this._drawingSvc.runAnimations(this.ctx,this.animCtx, this.animation, this.zoom, this.startTime, this.slideConfig.duration); \n}  \n    \n  \n   \n    \n    \n}    \n   \n    \n locatePolygon(mouse, ctx, display) {\n     if(this.mode==\"interaction\"){\n           var rZone;\n         let ref = this;\n         //z.cat!=\"movement\" && \n  this.displayedZones.filter((z)=>(z!=ref.selectedZone && z.category!=\"Mrak\")).forEach(function(zone, zid) {\n\n    let points = zone.points;\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    //console.log(zone.WORD[\"#text\"]+\"=\"+points[0].x+\":\"+ points[0].y);\n\n    for (let p = 1; p < points.length; p++) {\n      //  console.log(zone);\n      ctx.lineTo(points[p].x, points[p].y);\n\n      //console.log(points[p].x+\":\"+ points[p].y);\n    }\n\n    ctx.closePath();\n\n    if (ctx.isPointInPath(mouse.offsetX, mouse.offsetY)) {\n      rZone = zone;\n\n\n    }\n\n  });\n     if(rZone){\n      //  console.log(rZone.word);\n        \n     this.animCtx.clearRect(0,0,this.interaction.nativeElement.width,this.interaction.nativeElement.height);\n    // this._drawingSvc.drawPolygon(this.interCtx, rZone.points,\"highlight\");\n    rZone.highlight(this.animCtx);\n         console.log(this.magicGlass);\n        \n     if(display==true){\n      //   console.log(rZone);\n           \n        this.clicked.emit(rZone); \n       \n      \n             this.focusOn(rZone); \n             this.selectedZone = rZone;\n         \n        \n     } \n     }\n\n  \n     }\n\n\n\n}\n    \ncalcZoomToFit(){\n//    console.log(\"calculating zoom\");\n  //   console.log(this.wrapper);\n   // console.log(this.wrapper.nativeElement.offsetHeight);\n    let wrapperWidth=this.wrapper.nativeElement.offsetWidth;\n    let wrapperHeight=this.wrapper.nativeElement.offsetHeight;\n    \n //   console.log(wrapperWidth +\" <> \"+wrapperHeight);\n    \n    let ratioX=parseInt(wrapperWidth)/parseInt(this.imgData.width);\n    let ratioY=parseInt(wrapperHeight)/parseInt(this.imgData.height);\n    \n  //  console.log(ratioX +\" - \"+ratioY);\n    \n    if(ratioX<=ratioY){\n      //  console.log(\"returning X\");\n        return ratioX;\n    }else{\n        return ratioY;\n    }\n}\n    \n    \nzoomChng(zChng) {\n  // console.log(zChng);\n // console.log(\"before:\", this.zoom);\n  let newZoomLevel = this.zoom + parseFloat(zChng);\n  this.zoom = newZoomLevel >= .1 ? newZoomLevel : .1;\n//  console.log(\"after:\", this.zoom);\n    this.scaleCanvas([this.canvas, this.interaction, this.animation], this.wrapper, this.outer, this.zoom, this.fitZoom,{x:0,y:0});\n\n\n}\n    \n    opacityChng(or) {\nthis.canvas.nativeElement.style.opacity=1-or;\n        this.interaction.nativeElement.style.opacity=or;\n}\n    \n    \nredrawSelected(e){\n //   console.log(e);\n    this.displayedZones = this.zones.filter((z)=>e[z.category]==true);\n    this.processZones(this.displayedZones);\n}    \n    \n    \n    scaleCanvas(canvases, inner, outer, zoom, fitZoom, translate){\n      //  console.log(\"scaling to: \"+zoom);\n      \nlet dw=parseInt(outer.nativeElement.style.width);   // manuscript element\nlet dh=parseInt(outer.nativeElement.style.height);   \n    \n    \nlet nw : number=parseInt(this.imgData.width)*zoom;    \nlet nh : number=parseInt(this.imgData.height)*zoom;  \n    \n        let ref=this;\n    canvases.forEach(function(c){\n        let shift=\" \";\n        if(zoom<fitZoom){\n          //c.nativeElement.style[\"transform-origin\"]= \"center center\";  \n            shift=\" translate(500px, 500px)\";\n        }else{\n            c.nativeElement.style[\"transform-origin\"]= \"top left\"; \n        }\n        \n        c.nativeElement.style.transform= \"scale(\" + zoom + \",\" + zoom + \") translate(\"+translate.x+\"px,\"+translate.y+\"px)\";\n        \n        \n         if(nw<dw && nh<dh)\n        {\n       c.nativeElement.style.overflow=\"hidden\";\n        }\n    else\n           {\n            c.nativeElement.style.overflow=\"scroll\";\n        }\n        \n    });\n    \n\n   \n    \n   // console.log(nw + \"--\" + nh);\n inner.nativeElement.style.width=nw;\n  inner.nativeElement.style.height=nh;\n       \n        \n} \n    \n  focusOn(zone){\n   // console.log(\"zooming in\");\n         \n    let xtr=zone.imgCoords;\n    \n    let sx=xtr.max.x-xtr.min.x;\n    let sy=xtr.max.y-xtr.min.y;\n    \n    let vw=this.outer.nativeElement.clientWidth;\n    let vh=this.outer.nativeElement.clientHeight;\n      \n    //  console.log(this.outer);\n    \n    let ox=(vw-sx)/2;\n    let oy=(vh-sy)/2;\n      let nzm: number;\n      \n    if(ox<oy){\n        nzm = vw/sx*0.7;\n    }else{\n         nzm = vh/sy*0.7;\n    }\n  \n    //  console.log(vw + \" : \" + sx);\n    //  console.log(\"new zoom: \"+nzm);\n       let ref=this;\n      \n\n    \n    this.zoomChng(nzm-this.zoom);\n     // ref.moveScreen(xtr,ox,oy, nzm, zone);\n     \n   setTimeout(function(){ref.moveScreen(xtr,ox,oy, nzm, zone)},700);\n   \n                };\n    \nmoveScreen(xy, ox, oy, nzm, zone) {\n//  console.log(((xy.max.x-xy.min.y)/6*nzm) + \"//\" + ((xy.max.y-xy.min.y)/6*nzm));\n//-((xy.max.x-xy.min.y/3)*nzm)\n//-((xy.max.y-xy.min.y/3)*nzm)\n    var x=Math.max(0,(xy.min.x*nzm-((xy.max.x-xy.min.x)/6*nzm) ));\n    var y=Math.max(0,(xy.min.y*nzm-((xy.max.y-xy.min.y)/6*nzm)));\n\n\n // console.log(x + \"-ss-\" + y);\n  //  console.log( this.outer);\n\n  this.wrapper.nativeElement.scrollTop = y;\n  this.wrapper.nativeElement.scrollLeft = x;\n     zone.activate(this.magicGlass, nzm);\n    \n           // this.displayedZones = this.zones.filter((z)=>z.word!=zone.word);\n      //this.processZones(this.displayedZones);\n\n\n}\n  \n  \n    \n\n}\n\n\n","import { DrawingSettings } from '../interfaces/drawing-settings';\r\nimport { Point } from '../interfaces/point';\r\nimport { TransformSettings } from '../interfaces/transform-settings';\r\n\r\nimport { DrawingSvc } from '../services/drawing.service';\r\n\r\nexport class Zone {\r\n    drawing : DrawingSvc  = new DrawingSvc();\r\n    word: string;\r\n    category: string;\r\n    \r\n    title : string;\r\n    description: string;\r\n    image: string;\r\n    music: string;\r\n    comment: string;\r\n    \r\n    img : any;\r\n    source : string;\r\n    \r\n    points: Point[]; \r\n    imgCoords : any;\r\n    drawingSetting: string;\r\n    static: boolean;\r\n    \r\n    offset? : number;\r\n    duration? : number;\r\n    \r\n    \r\n    constructor(slide){\r\n      //console.log(\"constructing zone\");\r\n        this.static = true;\r\n        this.word = slide.word;\r\n        this.category = slide.cat;\r\n        \r\n        this.title = slide.fields.title.value;\r\n        this.image=\"assets/images/\"+slide.fields.image.value;\r\n        this.description = slide.fields.description.value;\r\n        this.music = slide.fields.music.value;\r\n       // this.comment = slide.fields.comment.value;\r\n        \r\n        this.points=this.drawing.stringToPath(slide.shape);\r\n        this.imgCoords=this.calcImgCoords(this.points); \r\n        console.log(this.imgCoords);\r\n        \r\n        if(slide.fields.drawingSetting){\r\n            this.drawingSetting = slide.fields.drawingSetting.value;\r\n        }else{\r\n            this.drawingSetting = slide.cat;\r\n        }\r\n       \r\n             if(slide.fields.image.value){\r\n            this.img=new Image();\r\n                this.img.src=\"assets/images/\"+slide.fields.image.value;\r\n              //console.log(\"image loaded: \" + this.img.src);\r\n           this.source=slide.fields.icon.value;\r\n           \r\n            }\r\n        \r\n      //console.log(this);\r\n        \r\n    }\r\n    \r\n   highlight(ctx){\r\n       this.drawing.applySetting(ctx,\"highlight\");\r\n        this.drawing.drawPolygon(ctx, this.points, \"highlight\");\r\n    }\r\n    \r\n\r\n    \r\n     calcImgCoords(points){\r\n        let xs=points.map((p)=>p.x);\r\n        let ys=points.map((p)=>p.y);\r\n        \r\n        let minX=this.myArrayMin(xs);\r\n        let minY=this.myArrayMin(ys);\r\n        \r\n        let maxX=this.myArrayMax(xs);\r\n        let maxY=this.myArrayMax(ys);\r\n        \r\n      return {topLeft:{x:minX, y:minY}, width:maxX-minX, height:maxY-minY, min:{x:minX, y:minY}, max:{x:maxX, y:maxY}}\r\n    }\r\n    \r\n        myArrayMin(arr) {\r\n  return Math.min.apply(null, arr);\r\n}\r\n  \r\n    myArrayMax(arr) {\r\n  return Math.max.apply(null, arr);\r\n}\r\n    \r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport class Icon extends Zone {\r\n    \r\n    position: any;\r\n    img : any;\r\n    source : string;\r\n    animationPath : any;\r\n    \r\n    constructor(slide){\r\n        super(slide);\r\n      \r\n        \r\n           this.position=this.imgCoords.topLeft;\r\n            this.img=new Image();\r\n                this.img.src=\"assets/images/\"+slide.fields.icon.value;\r\n              //console.log(\"image loaded: \" + this.img.src);\r\n           this.source=slide.fields.icon.value;\r\n        \r\n        if(slide.fields.path.value){\r\n            let pathPoints = this.drawing.stringToPath(slide.fields.path.value);\r\n            this.animationPath = this.drawing.calcAnimationPath(this.imgCoords.topLeft, pathPoints);\r\n        }\r\n        \r\n    }\r\n    \r\n    draw(ctx){\r\n        this.drawing.drawImage(ctx, this);\r\n        console.log(\"drawing \"+this.word);\r\n    }\r\n    \r\n    \r\n    addToAnimations(canvas, zoom){\r\n   //  console.log(\"adding\" + this.word);\r\n       return [this];\r\n    }\r\n    \r\n    animate(ctx, stage, canvas, zoom){\r\n       // console.log(\"animating region\");\r\n         ctx.save();\r\n        \r\n        this.draw(ctx);\r\n         ctx.restore();\r\n     \r\n    }\r\n    \r\n    \r\n\r\n    \r\n    \r\n}\r\n\r\n\r\nexport class Region extends Zone {\r\n\r\n    constructor(slide){\r\n        super(slide);\r\n      //console.log(\"constructing region\");\r\n    }\r\n        \r\n\r\n    draw(ctx){\r\n      //console.log(\"drawing Region\");\r\n         this.drawing.applySetting(ctx, this.drawingSetting);\r\n        this.drawing.drawPolygon(ctx, this.points, this.drawingSetting);\r\n    }\r\n    \r\n        addToAnimations(canvas, zoom){\r\n     console.log(\"adding\" + this.word);\r\n       return [this];\r\n    }\r\n    \r\n    animate(ctx, stage, canvas, zoom){\r\n       // console.log(\"animating region\");\r\n         ctx.save();\r\n        this.drawing.applySetting(ctx, this.drawingSetting);\r\n        ctx.globalAlpha=stage;\r\n        this.draw(ctx);\r\n         ctx.restore();\r\n     \r\n    }\r\n    \r\n       activate(component, zoom){\r\n      component.hideFrame();\r\n    }\r\n        \r\n   \r\n}\r\n\r\nexport class Glass extends Region{\r\ntranscription : any;\r\n    constructor(slide){\r\n        super(slide);\r\n      //console.log(\"constructing region\");\r\n        this.transcription=this.description.split(\" \").map(function(w){return {transcript:w, translation:\"\"}});\r\n    }\r\n        \r\n\r\n    \r\n    activate(component, zoom){\r\n        console.log(\"activating\");\r\n        console.log(component.container.nativeElement);\r\n        component.placeFrame(this.imgCoords, zoom);\r\n        component.transcription=this.transcription;\r\n        console.log(component);\r\n        \r\n    }\r\n    \r\n        \r\n   \r\n}\r\n\r\nexport class Cover extends Zone {\r\n\r\n    constructor(slide){\r\n        super(slide);\r\n      //console.log(\"constructing region\");\r\n    }\r\n        \r\n\r\n    draw(ctx){\r\n      //console.log(\"drawing Region\");\r\n         this.drawing.applySetting(ctx, this.drawingSetting);\r\n     this.drawing.drawCover(ctx, this.points);\r\n \r\n    \r\n    }\r\n    \r\n        addToAnimations(canvas, zoom){\r\n     console.log(\"adding\" + this.word);\r\n       return [this];\r\n    }\r\n    \r\n    animate(ctx, stage, canvas, zoom){\r\n       // console.log(\"animating region\");\r\n         ctx.save();\r\n        this.drawing.applySetting(ctx, this.drawingSetting);\r\n        ctx.globalAlpha=stage;\r\n        this.draw(ctx);\r\n         ctx.restore();\r\n     \r\n    }\r\n    \r\n        \r\n   \r\n}\r\n\r\n\r\n\r\n\r\nexport class Poster extends Zone {\r\n    \r\n    imgCoords : any;\r\n    position: any;\r\n    img : any;\r\n    source : string;\r\n    alpha : number;\r\n    transform: any;\r\n    duration : number;\r\n    transformSetting : TransformSettings;\r\n    animation : string;\r\n    \r\n    constructor(slide){\r\n        super(slide);\r\n        this.duration = 5000;\r\n        this.static = false;\r\n        this.animation = slide.fields.animation.value;\r\n      this.imgCoords=this.calcImgCoords(this.points); \r\n        \r\n           this.position=this.imgCoords.topLeft;\r\n            this.img=new Image();\r\n                this.img.src=\"assets/images/\"+slide.fields.image.value;\r\n              //console.log(\"image loaded: \" + this.img.src);\r\n        \r\n           this.source=slide.fields.icon.value;\r\n    }\r\n    \r\n    addToAnimations(canvas, zoom){\r\n      //console.log(this.img);\r\n        this.transformSetting=this.drawing.calcScaleToFit(this.imgCoords, canvas, zoom);\r\n  \r\n      //console.log(\"TEXT: \" + this.description);\r\n        let text = new Text(this.description, 200, 500);\r\n       return [this];\r\n    }\r\n    \r\n    animate(ctx, stage, canvas, zoom){\r\n         ctx.save();\r\n        this.setTransformSetting(stage, this.animation);\r\n        this.drawing.drawTransparentImage(ctx, this, zoom);\r\n        \r\n        if(this.animation==\"curtain\"){\r\n            this.drawing.drawCurtain(ctx, this);\r\n        }\r\n        \r\n         ctx.restore();\r\n       \r\n          \r\n    }\r\n    \r\n    draw(ctx){\r\n        this.drawing.drawStaticImage(ctx, this);\r\n    }\r\n    \r\n    setTransformSetting(stage, version){\r\n      //console.log(\"SETTING V: \" + version);\r\n        switch(version){\r\n            case \"all\": this.transformSetting.globalAlpha = this.calcAlpha(stage); this.transformSetting.scale = this.calcScale(stage, 0.5, 1); this.transformSetting.translate = this.calcTranslate(stage, this.transformSetting.center); break;\r\n                case \"smAll\": this.transformSetting.globalAlpha = this.calcAlpha(stage); this.transformSetting.scale = 1 + (stage/5); this.transformSetting.translate = this.calcTranslate(stage, this.transformSetting.centerOrig); break;\r\n            case \"alpha\": this.transformSetting.globalAlpha = this.calcAlpha(stage); this.transformSetting.scale = this.transformSetting.maxScale ; this.transformSetting.translate = {x:0, y:0}; break;\r\n             case \"curtain\": this.transformSetting.globalAlpha = 1-stage; this.transformSetting.scale = this.transformSetting.maxScale ; this.transformSetting.translate = {x:0, y:0}; break;\r\n            case \"static\": this.transformSetting.globalAlpha =  this.calcAlpha(stage); this.transformSetting.scale = 1 ; this.transformSetting.translate = {x:this.imgCoords.topLeft.x, y:this.imgCoords.topLeft.y}; break;\r\n        }\r\n        \r\n    }\r\n    \r\n    calcAlpha(stage){\r\n        let alpha:number;\r\n             if(stage<0.5){\r\n         alpha=Math.sqrt(stage/0.5);\r\n     }else{\r\n         alpha=Math.sqrt((1-stage)*2);\r\n     }   \r\n      return alpha;\r\n    }\r\n    \r\n      calcScale(stage, initial, target){\r\n        let scale:number;\r\n          scale = (this.transformSetting.maxScale*initial) + (((target-initial)*this.transformSetting.maxScale)*stage);\r\n        return scale;\r\n   \r\n      }\r\n    \r\n    calcTranslate(stage, destination){\r\n          let x = this.imgCoords.topLeft.x + ((destination.x-this.imgCoords.topLeft.x)*stage);\r\n        let y =  this.imgCoords.topLeft.y + ((destination.y-this.imgCoords.topLeft.y)*stage);\r\n        return {x:x, y:y};\r\n   \r\n      }\r\n}\r\n\r\n\r\n\r\nexport class Slide{\r\n    name : string;\r\n    text : Text;\r\n    duration : number;\r\n    music : string;\r\n    zones : any[];\r\n    \r\n    seqLength: number;\r\n    seqCount: number;\r\n    \r\n    constructor(data, zones){\r\n        this.name = data.name;\r\n        let text = data.text;\r\n        this.duration = data.duration;\r\n        this.zones = zones;\r\n        this.music=data.music;\r\n        this.zones.push(new Text(text, 1700, 2000));\r\n        \r\n        this.seqLength = this.zones.filter((z)=> z.text==null).length;\r\n        this.seqCount = 0;\r\n        \r\n       this.setTiming(data);\r\n    }\r\n    \r\n    addToAnimations(canvas, zoom){\r\n        let animations=[];\r\n        this.zones.forEach((z)=>animations=animations.concat(z.addToAnimations(canvas, zoom)));\r\n       return animations;\r\n    }\r\n    \r\n    animate(ctx, stage, canvas, zoom){\r\n         let animations=[];\r\n        this.zones.forEach((z)=>z.animate(ctx, stage, canvas, zoom));\r\n       return animations;\r\n     \r\n    }\r\n    \r\n    setTiming(data){\r\n        let ref = this;\r\n        let segment = this.duration / this.seqLength;\r\n        \r\n          this.zones.filter((z)=>z.text!=null).forEach(function(z, zi){\r\n            z.offset = 0; \r\n            z.duration = data.duration;\r\n               \r\n            });\r\n             \r\n        \r\n        \r\n         this.zones.filter((z)=>z.text==null).forEach(function(z, zi){\r\n            switch(data.seqMode){\r\n                case \"S\" : z.offset = 0; z.duration = data.duration; break; \r\n                case \"D\" : z.offset = zi*segment; z.duration = segment; break; \r\n                case \"C\" : z.offset = zi*segment; z.duration = data.duration-z.offset; break; \r\n            }\r\n              \r\n        });\r\n    }\r\n    \r\n    \r\n}\r\n\r\n\r\nexport class Text{\r\n    drawing : DrawingSvc  = new DrawingSvc();\r\n    text : string;\r\n    x : number;\r\n    y: number;\r\n    \r\n    constructor(text, x, y){\r\n      console.log(\">> constructing TEXT: \" + text);\r\n        this.text = text;\r\n        this.x= x;\r\n        this.y = y;   \r\n      //console.log(this);\r\n    }\r\n    \r\n    addToAnimations(canvas, zoom){\r\n        return [this]\r\n    }\r\n    \r\n    animate(ctx, stage, canvas){\r\n        ctx.globalAlpha = this.calcAlpha(stage);\r\n\r\n        this.drawing.writeText(ctx,this, canvas.nativeElement.offsetWidth, canvas.nativeElement.offsetHeight);\r\n    }\r\n    \r\n       calcAlpha(stage){\r\n        let alpha:number;\r\n             if(stage<0.5){\r\n         alpha=stage/0.5;\r\n     }else{\r\n         alpha=(1-stage)*2;\r\n     }   \r\n      return alpha;\r\n    }\r\n    \r\n}\r\n\r\nexport class Curtain extends Slide{\r\n   width : number;\r\n    height : number;\r\n    x : number;\r\n    y : number;\r\n    constructor(data, zones){\r\n        super(data, zones);\r\n        this.width = data.width;\r\n        this.height = data.height;\r\n        this.x = data.x;\r\n        this.y = data.y;\r\n        \r\n        for(let x=0;x<data.x;x++){\r\n            for(let y=0;y<data.y;y++){\r\n            \r\n                this.zones.push(new Cloud((data.width/data.x)*x, (data.height/data.y)*y, data.shape, data.setting));\r\n            }\r\n        }\r\n        \r\n         this.zones.push(new Text(data.text, 1700, 2000));\r\n        this.setTiming(data);\r\n    }\r\n    \r\n    \r\n}\r\n\r\nexport class Cloud{\r\n    type : string;\r\n    drawing : DrawingSvc  = new DrawingSvc();\r\n    drawingSetting: string;\r\n    transformSetting : TransformSettings;\r\n    points : Point[];\r\n\r\n    constructor(x, y, shape, setting){\r\n        this.type = \"element\";\r\n        this.drawingSetting = setting;\r\n        this.points = this.drawing.stringToPath(shape);\r\n        this.transformSetting = {maxScale:1, scale:1, translate:{x:this.getRandom(x-50, x+50), y:this.getRandom(y-50, y+50)}, globalAlpha: this.getRandom(0,1)};\r\n        \r\n    }\r\n    \r\n    addToAnimations(){\r\n        return [this];\r\n    }\r\n\r\n    \r\n    animate(ctx, stage, canvas, zoom){\r\n       // console.log(\"animating region\");\r\n         ctx.save();\r\n        this.randomizeSetting(stage);\r\n        this.drawing.applySetting(ctx, this.drawingSetting);\r\n        this.drawing.applyTransform(ctx, this.transformSetting);\r\n         ctx.globalAlpha = 1-stage;\r\n        this.draw(ctx);\r\n         ctx.restore();\r\n     \r\n    }\r\n    \r\n    randomizeSetting(stage){\r\n        this.transformSetting.translate.x+=this.getRandom(-0.05,0.05);\r\n        this.transformSetting.translate.y+=this.getRandom(-0.05,0.05);\r\n        this.transformSetting.globalAlpha=1-stage;\r\n        this.transformSetting.scale+=this.getRandom(0,0.02);\r\n        let ref=this;\r\n       //this.points.forEach((point)=>{point.x+=ref.getRandom(0,1);});\r\n        \r\n     //   console.log(this.transformSetting);\r\n        \r\n    }\r\n    \r\n     draw(ctx){\r\n      //console.log(\"drawing Region\");\r\n         this.drawing.applySetting(ctx, this.drawingSetting);\r\n        this.drawing.applyTransform(ctx, this.transformSetting);\r\n        \r\n        this.drawing.drawPolygon(ctx, this.points, this.drawingSetting);\r\n    }\r\n    \r\n     getRandom(min, max){\r\n    let result = min + (Math.random()*(max-min));\r\n    return result;\r\n}\r\n    \r\n      calcAlpha(stage){\r\n        let alpha:number;\r\n             if(stage<0.5){\r\n         alpha=Math.sqrt(stage/0.5);\r\n     }else{\r\n         alpha=Math.sqrt((1-stage)*2);\r\n     }   \r\n      return alpha;\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n","module.exports = \"* {box-sizing: border-box}\\r\\n\\r\\n#container{\\r\\n    position:absolute;\\r\\n    left:0;\\r\\n    bottom:0;\\r\\n    width: 100%;\\r\\n    height:auto;\\r\\n    display: -webkit-box;\\r\\n    display: flex;\\r\\n    -webkit-box-orient: vertical;\\r\\n    -webkit-box-direction: normal;\\r\\n            flex-flow: column nowrap;\\r\\n    background-color: rgba(0,0,0,0.8);\\r\\n    color: white;\\r\\n    padding:1em;\\r\\n    z-index:500;\\r\\n    overflow-y : scroll;\\r\\n    -webkit-transition: height 2s;\\r\\n    transition: height 2s;\\r\\n}\\r\\n\\r\\n#image{\\r\\n   background-color: rgba(100,100,100,0.3);\\r\\nmargin: 0.5em;\\r\\n    margin-bottom: 1em;\\r\\nmargin-bottom: 0;\\r\\nbox-shadow: 0 0 15px rgba(0,0,0,0.7);\\r\\nmax-width: 100%;\\r\\nborder: 2px outset rgb(100,100,100);\\r\\n}\\r\\n\\r\\n#description{\\r\\n       background-color: rgba(0,0,0,0.7);\\r\\nmargin:0.5em;\\r\\n    padding:1em;\\r\\nbox-shadow: 0 0 15px rgba(0,0,0,0.7);\\r\\n   max-width:100%;\\r\\n}\\r\\n\\r\\n#description h2{\\r\\n    border-bottom : 1px solid white;\\r\\n}\\r\\n\\r\\n/* CUSTOM SCROLLBAR */\\r\\n\\r\\n::-webkit-scrollbar {\\r\\n    width: 11px;\\r\\n    height: 11px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-button {\\r\\n    width: 0px;\\r\\n    height: 0px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb {\\r\\n    background: rgb(20,20,20);\\r\\n    border: 2px solid #ffffff;\\r\\n    border-radius: 50px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb:hover {\\r\\n    background: #ffffff;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb:active {\\r\\n    background: #000000;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track {\\r\\n    background: rgb(20,20,20);\\r\\n    border: 0px none #ffffff;\\r\\n    border-radius: 39px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track:hover {\\r\\n    background: rgb(20,20,20);\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track:active {\\r\\n    background: rgb(20,20,20);\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-corner {\\r\\n    background: transparent;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2ltYWdlL2ltYWdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsR0FBRyxzQkFBc0I7O0FBRXpCO0lBQ0ksaUJBQWlCO0lBQ2pCLE1BQU07SUFDTixRQUFRO0lBQ1IsV0FBVztJQUNYLFdBQVc7SUFDWCxvQkFBYTtJQUFiLGFBQWE7SUFDYiw0QkFBd0I7SUFBeEIsNkJBQXdCO1lBQXhCLHdCQUF3QjtJQUN4QixpQ0FBaUM7SUFDakMsWUFBWTtJQUNaLFdBQVc7SUFDWCxXQUFXO0lBQ1gsbUJBQW1CO0lBQ25CLDZCQUFxQjtJQUFyQixxQkFBcUI7QUFDekI7O0FBRUE7R0FDRyx1Q0FBdUM7QUFDMUMsYUFBYTtJQUNULGtCQUFrQjtBQUN0QixnQkFBZ0I7QUFDaEIsb0NBQW9DO0FBQ3BDLGVBQWU7QUFDZixtQ0FBbUM7QUFDbkM7O0FBRUE7T0FDTyxpQ0FBaUM7QUFDeEMsWUFBWTtJQUNSLFdBQVc7QUFDZixvQ0FBb0M7R0FDakMsY0FBYztBQUNqQjs7QUFFQTtJQUNJLCtCQUErQjtBQUNuQzs7QUFJQSxxQkFBcUI7O0FBRXJCO0lBQ0ksV0FBVztJQUNYLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxVQUFVO0lBQ1YsV0FBVztBQUNmOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLHlCQUF5QjtJQUN6QixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsd0JBQXdCO0lBQ3hCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLHVCQUF1QjtBQUMzQiIsImZpbGUiOiIuLi9pbWFnZS9pbWFnZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiKiB7Ym94LXNpemluZzogYm9yZGVyLWJveH1cclxuXHJcbiNjb250YWluZXJ7XHJcbiAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgIGxlZnQ6MDtcclxuICAgIGJvdHRvbTowO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6YXV0bztcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWZsb3c6IGNvbHVtbiBub3dyYXA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuOCk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBwYWRkaW5nOjFlbTtcclxuICAgIHotaW5kZXg6NTAwO1xyXG4gICAgb3ZlcmZsb3cteSA6IHNjcm9sbDtcclxuICAgIHRyYW5zaXRpb246IGhlaWdodCAycztcclxufVxyXG5cclxuI2ltYWdle1xyXG4gICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEwMCwxMDAsMTAwLDAuMyk7XHJcbm1hcmdpbjogMC41ZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxZW07XHJcbm1hcmdpbi1ib3R0b206IDA7XHJcbmJveC1zaGFkb3c6IDAgMCAxNXB4IHJnYmEoMCwwLDAsMC43KTtcclxubWF4LXdpZHRoOiAxMDAlO1xyXG5ib3JkZXI6IDJweCBvdXRzZXQgcmdiKDEwMCwxMDAsMTAwKTtcclxufVxyXG5cclxuI2Rlc2NyaXB0aW9ue1xyXG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjcpO1xyXG5tYXJnaW46MC41ZW07XHJcbiAgICBwYWRkaW5nOjFlbTtcclxuYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSgwLDAsMCwwLjcpO1xyXG4gICBtYXgtd2lkdGg6MTAwJTtcclxufVxyXG5cclxuI2Rlc2NyaXB0aW9uIGgye1xyXG4gICAgYm9yZGVyLWJvdHRvbSA6IDFweCBzb2xpZCB3aGl0ZTtcclxufVxyXG5cclxuXHJcblxyXG4vKiBDVVNUT00gU0NST0xMQkFSICovXHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyIHtcclxuICAgIHdpZHRoOiAxMXB4O1xyXG4gICAgaGVpZ2h0OiAxMXB4O1xyXG59XHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyLWJ1dHRvbiB7XHJcbiAgICB3aWR0aDogMHB4O1xyXG4gICAgaGVpZ2h0OiAwcHg7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkICNmZmZmZmY7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MHB4O1xyXG59XHJcblxyXG46Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQ6ICNmZmZmZmY7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6YWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQ6ICMwMDAwMDA7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxuICAgIGJvcmRlcjogMHB4IG5vbmUgI2ZmZmZmZjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDM5cHg7XHJcbn1cclxuXHJcbjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2s6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxufVxyXG5cclxuOjotd2Via2l0LXNjcm9sbGJhci10cmFjazphY3RpdmUge1xyXG4gICAgYmFja2dyb3VuZDogcmdiKDIwLDIwLDIwKTtcclxufVxyXG5cclxuOjotd2Via2l0LXNjcm9sbGJhci1jb3JuZXIge1xyXG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbn1cclxuIl19 */\"","module.exports = \"<div id=container>\\n    \\n    <img [src]=\\\"imgUrl\\\" id=image *ngIf=\\\"imgUrl!=null\\\"/>\\n    \\n    <div id=description *ngIf=\\\"description\\\">\\n        <h2 id=imgHeadline>{{name}}</h2>\\n        <p class=description>\\n    {{description}}\\n        </p>\\n    </div>\\n\\n</div>\\n\"","import { Component, OnChanges, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.css']\n})\nexport class ImageComponent implements OnChanges {\n    \n    @Input('imgUrl') imgUrl : string;\n    @Input('name') name : string;\n    @Input('description') description : string;\n    @Input('mapTitle') mapTitle : string;\n\n  constructor() { }\n\n  ngOnChanges() {\n     \n  }\n\n}\n","module.exports = \"app-audio{\\r\\n    position:absolute;\\r\\n    top:0;\\r\\n    right:0;\\r\\n    margin:1%;\\r\\n    z-index:1000;\\r\\n}\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2ludGVyYWN0aW9uL2ludGVyYWN0aW9uLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxpQkFBaUI7SUFDakIsS0FBSztJQUNMLE9BQU87SUFDUCxTQUFTO0lBQ1QsWUFBWTtBQUNoQiIsImZpbGUiOiIuLi9pbnRlcmFjdGlvbi9pbnRlcmFjdGlvbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYXBwLWF1ZGlve1xyXG4gICAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgICB0b3A6MDtcclxuICAgIHJpZ2h0OjA7XHJcbiAgICBtYXJnaW46MSU7XHJcbiAgICB6LWluZGV4OjEwMDA7XHJcbn1cclxuXHJcbiJdfQ== */\"","module.exports = \"\\n    \\n   <app-image [imgUrl]=\\\"imgUrl\\\" [name]=\\\"name\\\" [description]=\\\"description\\\" [mapTitle]=\\\"imgData.title\\\"></app-image>\\n\\n    <app-canvas [imgData]=\\\"imgData\\\" [zones]=\\\"zones\\\" [zoneCategories]=\\\"zoneCategories\\\" [mode]=\\\"mode\\\"  (clicked)=\\\"displayClicked($event)\\\"> </app-canvas>  \\n\\n\\n<!--<app-controls [cats]=\\\"cats\\\"></app-controls>\\n\\n<app-audio [songUrl]=\\\"songUrl\\\" [mode]=\\\"mode\\\" [youTubeId]=\\\"youTubeId\\\"></app-audio>\\n-->\\n\\n\"","import { Component, OnInit, Output, EventEmitter} from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { Islide } from '../interfaces/Islide';\nimport { MapData } from '../interfaces/map-data';\nimport { Zone, Region, Icon, Slide, Poster, Cover, Glass} from '../classes/zone';\nimport { ImgData} from '../interfaces/img-data';\nimport { ZoneCategory } from '../interfaces/zone-category';\n\n@Component({\n  selector: 'app-interaction',\n  templateUrl: './interaction.component.html',\n  styleUrls: ['./interaction.component.css']\n})\nexport class InteractionComponent implements OnInit {\n    @Output() soundLoaded = new EventEmitter<string>();\n    slide: any;\n    zoneLoader : Zone[];\n    zones: any;\n    description: string;\n    imgData: any;\n    imgUrl: string;\n    songUrl:string;\n    youTubeId : string = \"\";\n    commentUrl:string;\n    name: string;\n    zoneCategories: ZoneCategory[];\n    mode : string;\n    imgCount : number;\n    imgCounter : number = 0;\n    \n  constructor(protected _activatedRoute: ActivatedRoute, protected _dataService: DataService) { \n  this.zones=[];\n      this.zoneCategories=[];\nthis.mode=\"interaction\";\n  }\n\n\n  ngOnInit() {\n   // console.log(\"route at component: \"+this._activatedRoute.snapshot.params['map']);\n   //   console.log(\"selected zone: \"+this._activatedRoute.snapshot.params['zone']);\n      \n      //this._dataService.askOxford(\"ΤΗΣ\",\"el\");\n      \n      let map=this._activatedRoute.snapshot.params['map'];\n      let zone=this._activatedRoute.snapshot.params['zone'];\n      let ref=this;\n    this._dataService.fetchJson(map).subscribe(function(data : MapData){\n      //  console.log(data);\n       let imgData=data[\"imgData\"];\n        ref.imgData=imgData;\n       // console.log(ref.imgData);\n        \n    ref.imgCount=data.slides.filter((s)=>s.fields.icon.value!=\"\").length; \n        console.log(\"expecting \" + ref.imgCount + \"images total\");\n        \n      ref.zoneLoader=ref.processIcons(data);\n      //  console.log(ref.zones);\n  ref.displayZones();\n      let catList=ref.zones.map((zone)=>zone.category);\n     // this.cats=new Set(catList);\n      if(zone){\n          ref.displayClicked(this.zones[zone]);\n      }    \n        \n        \n        \n    });\n       // let id=<string>this._activatedRoute.snapshot.params['zid'];\n  \n      \n      \n  }\n    \ndisplayClicked(e){\n    //console.log(\"clicked\");\n    //console.log(e);\n    this.name=e.word;\n    this.description=e.description;\n    this.imgUrl=e.image;\n    \n        if(e.musicSource==\"youTube\"){\n            this.youTubeId=e.music;\n            this.songUrl=\"\";\n        }else{\n            this.songUrl=\"assets/audio/music/\"+e.music;\n            this.youTubeId=\"\";\n        }\n      \n        \n    \n    \n    if(e.fields.comment.value){\n       this.commentUrl=\"assets/audio/voice/\"+e.fields.voice.value; \n    }\n    \n    this.soundLoaded.emit(this.songUrl);\n}\n    \n       processIcons(slideSet){\n        let ref=this;\n        var result = [];\n         let categories = {};\n           \n        slideSet.slides.forEach(function(slide){\n          //  console.log(\"PROCESSING \"+ slide.word);\n            let newZone;\n            slide.component = ref;\n            switch(slide.cat){\n           \n                case \"translation\" : newZone= new Region(slide); break;\n                    case \"Script\" : newZone= new Region(slide); break;\n                    case \"Content\" : newZone= new Glass(slide); break;\n                 \n            }\n            \n            if(!categories[slide.cat]){\n                let selectedVal: boolean;\n               \n                \n                selectedVal=true;\n                \n               categories[slide.cat] = {name: slide.cat, zoneCount:0, selected:selectedVal}; \n            }\n            categories[slide.cat].zoneCount++;\n            \n            result.push(newZone);\n           // console.log(result);\n        });\n           \n      console.log(result);\n\n           \n           for(let c in categories){\n               this.zoneCategories.push(categories[c]);\n           }\n           \n        return result;\n    }\n    \n    displayZones(){\n        this.zones = this.zoneLoader;\n        console.log(\"displaying zones\");\n    }\n\n}\n","module.exports = \"#container{\\r\\n    position:absolute;\\r\\n    border:3px solid white;\\r\\n    background-color:transparent;\\r\\n    font-size:45px;\\r\\n    display:none;\\r\\n    z-index:5000;\\r\\n}\\r\\n\\r\\n\\r\\nspan.transcription{\\r\\n    color:blue;\\r\\n    margin-right: 0.3em;\\r\\n}\\r\\n\\r\\n\\r\\n.textBox{\\r\\n    display:-webkit-box;\\r\\n    display:flex;\\r\\n    -webkit-box-orient: horizontal;\\r\\n    -webkit-box-direction: normal;\\r\\n            flex-flow: row wrap;\\r\\n    \\r\\n}\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL21hZ2ljLWdsYXNzL21hZ2ljLWdsYXNzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxpQkFBaUI7SUFDakIsc0JBQXNCO0lBQ3RCLDRCQUE0QjtJQUM1QixjQUFjO0lBQ2QsWUFBWTtJQUNaLFlBQVk7QUFDaEI7OztBQUdBO0lBQ0ksVUFBVTtJQUNWLG1CQUFtQjtBQUN2Qjs7O0FBRUE7SUFDSSxtQkFBWTtJQUFaLFlBQVk7SUFDWiw4QkFBbUI7SUFBbkIsNkJBQW1CO1lBQW5CLG1CQUFtQjs7QUFFdkIiLCJmaWxlIjoiLi4vbWFnaWMtZ2xhc3MvbWFnaWMtZ2xhc3MuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXJ7XHJcbiAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgIGJvcmRlcjozcHggc29saWQgd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O1xyXG4gICAgZm9udC1zaXplOjQ1cHg7XHJcbiAgICBkaXNwbGF5Om5vbmU7XHJcbiAgICB6LWluZGV4OjUwMDA7XHJcbn1cclxuXHJcblxyXG5zcGFuLnRyYW5zY3JpcHRpb257XHJcbiAgICBjb2xvcjpibHVlO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAwLjNlbTtcclxufVxyXG5cclxuLnRleHRCb3h7XHJcbiAgICBkaXNwbGF5OmZsZXg7XHJcbiAgICBmbGV4LWZsb3c6IHJvdyB3cmFwO1xyXG4gICAgXHJcbn1cclxuXHJcbiJdfQ== */\"","module.exports = \"<div id=\\\"container\\\" #container >\\n    <div *ngIf=\\\"mode=='transcription'\\\" class=textBox>\\n        <span class=\\\"transcription\\\" *ngFor=\\\"let w of transcription\\\" (click)=\\\"translate(w)\\\">{{w.transcript}}({{w.translation}})</span>\\n    </div>\\n    \\n    <button (click)=\\\"mode='transcription'\\\">Transcribe</button>\\n     <button (click)=\\\"mode='none'\\\">Clear</button>\\n</div>\"","import { Component, OnInit, Input, ViewChild } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { Translation } from '../interfaces/translation';\n\n@Component({\n  selector: 'app-magic-glass',\n  templateUrl: './magic-glass.component.html',\n  styleUrls: ['./magic-glass.component.css']\n})\nexport class MagicGlassComponent implements OnInit {\n @Input(\"transcription\") transcription : any;\n    @ViewChild(\"container\") container : any;\n    width : number = 0;\n    mode : \"none\";\n  constructor(private data : DataService) { }\n\n  ngOnInit() {\n  }\n\n    \nplaceFrame(ic, zoom){\n    this.container.nativeElement.style.display=\"block\";\n    this.container.nativeElement.style.border=\"5px solid black\";\n    this.container.nativeElement.style.width=ic.width*zoom+\"px\";\n     this.container.nativeElement.style.height=ic.height*zoom+\"px\";\n    \n     this.container.nativeElement.style.left=ic.topLeft.x*zoom+\"px\";\n     this.container.nativeElement.style.top=ic.topLeft.y*zoom+\"px\";\n    \n    console.log(this.container.nativeElement.style);\n}    \n    \n    hideFrame(){\n        this.container.nativeElement.style.display=\"none\";\n    }\n    \n    translate(w){\n        console.log(w);\n        this.data.askOxford(w.transcript,\"el\").subscribe((resp:Translation)=>w.translation=resp.results[0].lexicalEntries[0].entries[0].senses[0].translations[0].text);\n    }\n    \n}\n","module.exports = \"#wrapper{\\r\\n        width: 100%;\\r\\n    height: 100%;\\r\\n    position: absolute;\\r\\n    display: -webkit-box;\\r\\n    display: flex;\\r\\n    -webkit-box-orient: vertical;\\r\\n    -webkit-box-direction: normal;\\r\\n            flex-flow: column nowrap;\\r\\n    -webkit-box-align: center;\\r\\n            align-items: center;\\r\\n    -webkit-box-pack: center;\\r\\n            justify-content: center;\\r\\n    background-size: cover;\\r\\n}\\r\\n\\r\\n#portalMenu{\\r\\n     background-image:url(\\\"https://www.draconica.net/ft2019/wp-content/uploads/sites/21/2019/02/bg3.jpg\\\");\\r\\nheight:80%;\\r\\n    width:50%;\\r\\n    box-shadow: 0 0 1em silver;\\r\\n    display: -webkit-box;\\r\\n    display: flex;\\r\\n    -webkit-box-orient: vertical;\\r\\n    -webkit-box-direction: normal;\\r\\n            flex-flow: column nowrap;\\r\\n    -webkit-box-align: center;\\r\\n            align-items: center;\\r\\n    -webkit-box-pack: center;\\r\\n            justify-content: center;\\r\\n}\\r\\n\\r\\na{\\r\\n    font-size:16pt;\\r\\n    color:silver;\\r\\n    text-decoration:none;\\r\\n    margin:0.2em;\\r\\n    border-radius:0.2em;\\r\\n    border: 1px solid silver;\\r\\n    padding:0.2em;\\r\\n    -webkit-transition:background-color 0.5s;\\r\\n    transition:background-color 0.5s;\\r\\n}\\r\\n\\r\\na:hover{\\r\\n    background-color:rgba(0,0,0,0.6);\\r\\n}\\r\\n\\r\\nh2{\\r\\n    width:96%;\\r\\n    color:silver;\\r\\n    border-bottom:1px solid silver;\\r\\n    text-align:center;\\r\\n    padding:0.2em;\\r\\n}\\r\\n\\r\\nimg{\\r\\n    margin:1em;\\r\\n    height:40%;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3BvcnRhbC9wb3J0YWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtRQUNRLFdBQVc7SUFDZixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLG9CQUFhO0lBQWIsYUFBYTtJQUNiLDRCQUF3QjtJQUF4Qiw2QkFBd0I7WUFBeEIsd0JBQXdCO0lBQ3hCLHlCQUFtQjtZQUFuQixtQkFBbUI7SUFDbkIsd0JBQXVCO1lBQXZCLHVCQUF1QjtJQUN2QixzQkFBc0I7QUFDMUI7O0FBRUE7S0FDSyxvR0FBb0c7QUFDekcsVUFBVTtJQUNOLFNBQVM7SUFDVCwwQkFBMEI7SUFDMUIsb0JBQWE7SUFBYixhQUFhO0lBQ2IsNEJBQXdCO0lBQXhCLDZCQUF3QjtZQUF4Qix3QkFBd0I7SUFDeEIseUJBQW1CO1lBQW5CLG1CQUFtQjtJQUNuQix3QkFBdUI7WUFBdkIsdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksY0FBYztJQUNkLFlBQVk7SUFDWixvQkFBb0I7SUFDcEIsWUFBWTtJQUNaLG1CQUFtQjtJQUNuQix3QkFBd0I7SUFDeEIsYUFBYTtJQUNiLHdDQUFnQztJQUFoQyxnQ0FBZ0M7QUFDcEM7O0FBRUE7SUFDSSxnQ0FBZ0M7QUFDcEM7O0FBRUE7SUFDSSxTQUFTO0lBQ1QsWUFBWTtJQUNaLDhCQUE4QjtJQUM5QixpQkFBaUI7SUFDakIsYUFBYTtBQUNqQjs7QUFHQTtJQUNJLFVBQVU7SUFDVixVQUFVO0FBQ2QiLCJmaWxlIjoiLi4vcG9ydGFsL3BvcnRhbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI3dyYXBwZXJ7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxufVxyXG5cclxuI3BvcnRhbE1lbnV7XHJcbiAgICAgYmFja2dyb3VuZC1pbWFnZTp1cmwoXCJodHRwczovL3d3dy5kcmFjb25pY2EubmV0L2Z0MjAxOS93cC1jb250ZW50L3VwbG9hZHMvc2l0ZXMvMjEvMjAxOS8wMi9iZzMuanBnXCIpO1xyXG5oZWlnaHQ6ODAlO1xyXG4gICAgd2lkdGg6NTAlO1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDFlbSBzaWx2ZXI7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG5he1xyXG4gICAgZm9udC1zaXplOjE2cHQ7XHJcbiAgICBjb2xvcjpzaWx2ZXI7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246bm9uZTtcclxuICAgIG1hcmdpbjowLjJlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6MC4yZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBzaWx2ZXI7XHJcbiAgICBwYWRkaW5nOjAuMmVtO1xyXG4gICAgdHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIDAuNXM7XHJcbn1cclxuXHJcbmE6aG92ZXJ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC42KTtcclxufVxyXG5cclxuaDJ7XHJcbiAgICB3aWR0aDo5NiU7XHJcbiAgICBjb2xvcjpzaWx2ZXI7XHJcbiAgICBib3JkZXItYm90dG9tOjFweCBzb2xpZCBzaWx2ZXI7XHJcbiAgICB0ZXh0LWFsaWduOmNlbnRlcjtcclxuICAgIHBhZGRpbmc6MC4yZW07XHJcbn1cclxuXHJcblxyXG5pbWd7XHJcbiAgICBtYXJnaW46MWVtO1xyXG4gICAgaGVpZ2h0OjQwJTtcclxufSJdfQ== */\"","module.exports = \"<div id=wrapper>\\n\\n<div id=portalMenu>\\n    \\n    <img src=\\\"/assets/images/graphics/header5.png\\\" />\\n    <h2>Mapy</h2>\\n    <a [routerLink]=\\\"['../interaction','aritreia']\\\">Aritreia</a><br>\\n    <a [routerLink]=\\\"['../interaction','ernavorn']\\\">Ernavorn</a>\\n        <h2>Prezentace</h2>\\n    <a [routerLink]=\\\"['../presentation','trailer']\\\">Úvod</a><br>\\n</div>\\n    \\n    \\n</div>\\n\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-portal',\n  templateUrl: './portal.component.html',\n  styleUrls: ['./portal.component.css']\n})\nexport class PortalComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Islide } from '../interfaces/Islide';\nimport { SlideSet } from '../interfaces/slide-set';\nimport { ImgData } from '../interfaces/img-data';\nimport { ActivatedRoute } from '@angular/router';\nimport { HttpClient , HttpHeaders } from '@angular/common/http';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataService {\n    presentation={jedna:\"prvni\", dva:\"druha\"};\n    slide: string;\n    imgData : ImgData[];\n    slideSets : SlideSet[];\n    \n\n  constructor(private _activatedRoute: ActivatedRoute, private http: HttpClient) { \n      console.log(\"data service construction\");\n     // console.log(this._activatedRoute.snapshot.params['zid']);\n  //this.slide=this._activatedRoute.snapshot.params['zid'];\n    //  console.log(\"SLIDE: \"+ this.slide);\n  \n  }\n    \n    fetchJson(fileName){\n        console.log(\"fetch \"+fileName);\n        return this.http.get(\"/assets/json/\"+fileName+\".json\");\n        \n    }\n    \n\n    \n     askOxford(word, language){\n        console.log(\"look up \"+word);\n \n        return this.http.get(\"/assets/php/askOxford.php?word=\"+word+\"&lang=\"+language);\n        \n    }\n    \n    \n    \n    \n\n    \n    processIcons(slideSet){\n        console.log(\"PROCEsSING\");\n        let ref=this;\n        slideSet.slides.forEach(function(slide){\n             slide.points=ref.stringToPath(slide.shape);\n            slide.imgCoords=ref.calcImgCoords(slide.points);\n            \n            if(slide.fields.icon.value){\n            slide.position=slide.imgCoords.topLeft;\n            slide.img=new Image();\n                slide.img.src=\"assets/images/\"+slide.fields.icon.value;\n                console.log(\"image loaded: \" + slide.img.src);\n           slide.source=slide.fields.icon.value;\n           \n            }\n            \n             if(slide.fields.image.value){\n            slide.img=new Image();\n                slide.img.src=\"assets/images/\"+slide.fields.image.value;\n                console.log(\"image loaded: \" + slide.img.src);\n           slide.source=slide.fields.icon.value;\n           \n            }\n        });\n        \n    }\n    \n    getImgData(i){\n        return this.imgData[i];\n    }\n    \n    getSlides(i){\n        let jsonData= this.fetchJson(\"aritreia\").subscribe(\n        function(data){\n            console.log(data);\n            let result=data;\n        this.processIcons(result);\n        return result;\n            \n            });\n        \n    }\n    \n        stringToPath(pathString){\n        let coords=pathString.trim().split(/\\s+/);\n        let rsl=[];\n        coords.forEach((c)=>{\n            let xy=c.trim().split(\",\");\n         \n            rsl.push({x:xy[0], y:xy[1]});\n        });\n        return rsl;\n    }\n    \n    calcImgCoords(points){\n        let xs=points.map((p)=>p.x);\n        let ys=points.map((p)=>p.y);\n        \n        let minX=this.myArrayMin(xs);\n        let minY=this.myArrayMin(ys);\n        \n        let maxX=this.myArrayMax(xs);\n        let maxY=this.myArrayMax(ys);\n        \n      return {topLeft:{x:minX, y:minY}, width:maxX-minX, height:maxY-minY, min:{x:minX, y:minY}, max:{x:maxX, y:maxY}}\n    }\n    \n    myArrayMin(arr) {\n  return Math.min.apply(null, arr);\n}\n  \n    myArrayMax(arr) {\n  return Math.max.apply(null, arr);\n}\n}\n \n    ","import { Injectable } from '@angular/core';\nimport { DrawingSettings } from '../interfaces/drawing-settings';\nimport { ImgData} from '../interfaces/img-data';\nimport { Point } from '../interfaces/point';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class DrawingSvc {\n    drawingSettings={uzemi:{}, highlight:{}, highlight_line:{}, Flora:{} , region_white:{}, region_green:{},region_green_dashed:{}, region_blue:{}, region_red:{}, region_red_dashed:{}, region_purple:{}, region_yellow:{},border_black:{},\n                     text:{},  image:{}, cloud:{}, darkCloud:{}, blackness:{}, battlefield:{}, road:{}, sea_road:{}, shadow_outline:{}};\n    animations=[];\n    dynamics = [];\n    animationStage=0;\n    \n    imgData : any;\n  \nconstructor(\n    ) { \n    \n    this.drawingSettings.uzemi=<DrawingSettings>{fillStyle:\"transparent\", strokeStyle:\"red\", lineWidth:5, shadowColor:\"transparent\", shadowBlur:0};\n    this.drawingSettings.Flora=<DrawingSettings>{fillStyle:\"rgba(0,255,0,0.5)\", strokeStyle:\"transparent\", lineWidth:1, shadowColor:\"transparent\", shadowBlur:0};\n    this.drawingSettings.region_white=<DrawingSettings>{fillStyle:\"rgba(255,255,255,0.2)\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n        this.drawingSettings.region_green=<DrawingSettings>{fillStyle:\"rgba(0,255,0,0.2)\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n         this.drawingSettings.region_blue=<DrawingSettings>{ fillStyle:\"rgba(0,0,255,0.2)\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n          this.drawingSettings.region_red=<DrawingSettings>{ fillStyle:\"rgba(255,0,0,0.2)\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n       \n         this.drawingSettings.region_purple=<DrawingSettings>{ fillStyle:\"rgba(255,0,255,0.2)\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n         this.drawingSettings.region_yellow=<DrawingSettings>{ fillStyle:\"rgba(239, 222, 28, 0.2)\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n         this.drawingSettings.border_black=<DrawingSettings>{ fillStyle:\"transparent\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n    this.drawingSettings.text=<DrawingSettings>{fillStyle:\"yellow\", strokeStyle:\"black\", lineWidth:3, shadowColor:\"transparent\", shadowBlur:0};\n    this.drawingSettings.highlight=<DrawingSettings>{ fillStyle:\"rgba(255,255,255,0.2)\", strokeStyle:\"transparent\", lineWidth:5, shadowColor:\"white\", shadowBlur:10};\n        this.drawingSettings.highlight_line=<DrawingSettings>{ fillStyle:\"transparent\", strokeStyle:\"rgba(255,255,255,0.7)\", lineWidth:8, shadowColor:\"white\", shadowBlur:5};\n    this.drawingSettings.image=<DrawingSettings>{ fillStyle:\"white\", strokeStyle:\"transparent\", lineWidth:5, shadowColor:\"white\", shadowBlur:10};\n        \n         this.drawingSettings.shadow_outline=<DrawingSettings>{ fillStyle:\"transparent\", strokeStyle:\"rgba(0,0,255,0.5)\", lineWidth:3, shadowColor:\"blue\", shadowBlur:10};\n        \n     this.drawingSettings.cloud=<DrawingSettings>{fillStyle:\"rgba(255,255,255,0.8)\", strokeStyle:\"transparent\", lineWidth:0, shadowColor:\"rgba(255,255,255,0.8)\", shadowBlur:50};    \n        this.drawingSettings.darkCloud=<DrawingSettings>{fillStyle:\"rgba(20,20,20,0.99)\", strokeStyle:\"transparent\", lineWidth:0, shadowColor:\"rgba(255,255,255,0.8)\", shadowBlur:100};  \n         this.drawingSettings.battlefield=<DrawingSettings>{fillStyle:\"rgba(255,0,0,0.5)\", strokeStyle:\"transparent\", lineWidth:0, shadowColor:\"rgba(255,0,0,0.5)\", shadowBlur:10}; \n        \n         this.drawingSettings.road=<DrawingSettings>{fillStyle:\"transparent\", strokeStyle:\"rgba(89, 52, 0,0.9)\", lineWidth:4, shadowColor:\"transparent\", shadowBlur:0}; \n        this.drawingSettings.sea_road=<DrawingSettings>{fillStyle:\"transparent\", strokeStyle:\"rgba(27, 29, 76,0.9)\", lineWidth:4, shadowColor:\"transparent\", shadowBlur:0};\n        \n        \n          this.drawingSettings.blackness=<DrawingSettings>{fillStyle:\"black\", strokeStyle:\"transparent\", lineWidth:0, shadowColor:\"black\", shadowBlur:5}; \n  this.imgData = {};\n    }\n    \n\n    \n    runAnimations(ctx, animCtx, canvas, zoom, startTime, duration){\n    //  console.log(\"animating\");\n        // this.applySetting(animCtx,\"image\");\n        let ref=this;\n        var requestAnimationFrame=window.requestAnimationFrame;\n        requestAnimationFrame(function(){ref.animate(ctx, animCtx, canvas, zoom, startTime, duration)});\n    }\n \n    \n    animate(ctx, animCtx, canvas, zoom, startTime, duration){\n        \n     animCtx.clearRect(0,0,canvas.nativeElement.width,canvas.nativeElement.height);\n        let ref=this;\n\n        this.animations.forEach(function(a, ai){\n            let now = Date.now();\n            let runningTime = now-startTime;\n           // console.log(\"running: \"+runningTime);\n            if(a.offset<=runningTime && a.offset+a.duration>=runningTime){\n               a.animate(animCtx, ref.calcStage(startTime+a.offset, a.duration), canvas, zoom);\n               }\n               \n             \n            \n        });\n        \n    \n        \n        if(this.animationStage<1){\n            this.animationStage=this.calcStage(startTime, duration);\n            requestAnimationFrame(function(){ref.runAnimations(ctx,animCtx, canvas, zoom, startTime, duration)});\n        }else{\n          //  console.log(\"animation finished\");\n            animCtx.clearRect(0,0,canvas.nativeElement.width,canvas.nativeElement.height);\n            this.animations.filter((a)=>a.fixed).forEach(function(a){\n                \n                    console.log(\"fixing \");\n                    console.log(a);\n                    a.draw(ctx);\n                \n        });\n        //    console.log(this.animations);\n        }\n        \n    }\n    \n    \n    calcStage(startTime, duration){\n        let now = Date.now();\n        let diff = now - startTime;\n        let stage = diff/duration;\n        return stage;\n    }\n  \n    \n    writeText(ctx, text, canvasWidth, canvasHeight){\n        this.applySetting(ctx, \"text\");\n \n        ctx.textAlign=\"center\";\n        ctx.fillStyle=\"yellow\";\n       \n        let fontSize = canvasHeight/20;\n  \n        ctx.font=\"800 \"+fontSize+\"px Arial\";\n       \n    let textWidth = ctx.measureText(text.text).width;\n        \n        let  x = canvasWidth/2;\n        let y: number;\n        \n        if(textWidth<=canvasWidth-50){\n            y = canvasHeight - 20 - fontSize;\n            this.placeText(ctx,text.text.replace(\";\",\"\"), x, y);\n        }else{\n            let textSplit = text.text.split(\";\");\n\n             y = canvasHeight - 40 - (fontSize*2);\n            this.placeText(ctx,textSplit[0], x, y);\n              y = canvasHeight - 20 - fontSize;\n            this.placeText(ctx,textSplit[1], x, y);\n        }\n        \n        \n       \n    \n \n    }\n    \n    placeText(ctx,text, x, y){\n\n         ctx.fillText(text, x, y);\n        ctx.lineWidth=2;\n        ctx.strokeStyle=\"black\";\n        ctx.strokeText(text, x, y);\n    }\n    \n\n \n    drawPolygon(ctx, points, setting){\n      // this.applySetting(ctx,this.drawingSettings[setting]);\n     \n            ctx.beginPath();\n            ctx.moveTo(points[0].x,points[0].y);\n            \n            for(var p=1;p<points.length;p++)\n            {\n                ctx.lineTo(points[p].x, points[p].y);\n            }\n            \n            ctx.closePath();\n            ctx.fill(); \n            ctx.stroke();\n    }\n    \n      drawLine(ctx, points, setting){\n      // this.applySetting(ctx,this.drawingSettings[setting]);\n     \n            ctx.beginPath();\n          ctx.setLineDash([10, 6])\n            ctx.moveTo(points[0].x,points[0].y);\n            \n            for(var p=1;p<points.length;p++)\n            {\n                ctx.lineTo(points[p].x, points[p].y);\n            }\n            \n            ctx.stroke();\n          ctx.setLineDash([])\n    }\n    \n     drawCover(ctx, points){\n      // this.applySetting(ctx,this.drawingSettings[setting]);\n     \n          ctx.fillRect(0,0,5000,5000);\n            ctx.globalCompositeOperation = \"destination-out\";\n            ctx.beginPath();\n            ctx.moveTo(points[0].x,points[0].y);\n            \n            for(var p=1;p<points.length;p++)\n            {\n                ctx.lineTo(points[p].x, points[p].y);\n            }\n            \n            ctx.closePath();\n            ctx.fill(); \n            ctx.stroke();\n         \n       \n        ctx.globalCompositeOperation = \"source-over\";\n    }\n    \n       \n    \n\n    \n    drawImage(ctx, zone){\n      //  console.log(zone);\n      //  ctx.globalAlpha=1;\n        let shift=[0,0];\n//   zone.img.src = \"assets/images/\"+zone.source;\n    let ix= parseInt(zone.imgCoords.topLeft.x+shift[0]);\n    let iy=parseInt(zone.imgCoords.topLeft.y+shift[1]);\n    //console.log(ctx.globalAlpha);\n      //  console.log(zone.img.src);\n    //    console.log(zone.img+\" / \"+ix+\" / \"+ iy+\" / \"+ zone.imgCoords.width+\" / \"+ zone.imgCoords.height);\n   ctx.drawImage(zone.img,ix, iy, zone.imgCoords.width, zone.imgCoords.height);\n         ctx.globalAlpha=1;\n      \n \n    }\n    \n    drawStaticImage(ctx, zone){\n        this.applySetting(ctx, \"image\");\n        \n       // let img=new Image();\n        zone.img.onload=function(img){\n             \n     //    console.log(zone.img+\" / \"+zone.imgCoords.topLeft.x+\" / \"+ zone.imgCoords.topLeft.y+\" / \"+ zone.imgCoords.width+\" / \"+ zone.imgCoords.height);\n        ctx.drawImage(zone.img,zone.imgCoords.topLeft.x, zone.imgCoords.topLeft.y, zone.imgCoords.width, zone.imgCoords.height);\n        ctx.font = \"20px Georgia\";\n        //ctx.fillStyle=\"black\";\n        ctx.globalAlpha=1;\n        ctx.fillText(zone.word,  zone.imgCoords.topLeft.x ,zone.imgCoords.topLeft.y+zone.imgCoords.height);\n        };\n \n    }\n    \n    drawTransparentImage(ctx,zone, zoom){\n        //console.log(zone.alpha);\n    this.applySetting(ctx, \"image\");   \nthis.applyTransform(ctx, zone.transformSetting);\n   \n       // ctx.scale(zone.maxScale, zone.maxScale);\n         \n       \n        // console.log(zone.img+\" / \"+zzoone.imgCoords.topLeft.x+\" / \"+ zone.imgCoords.topLeft.y+\" / \"+ zone.imgCoords.width+\" / \"+ zone.imgCoords.height);\n        ctx.drawImage(zone.img,0, 0, zone.imgCoords.width, zone.imgCoords.height);\n       \n    \n    \n    }\n    \n        \n    drawCurtain(ctx,zone){\n  \n  \n        ctx.fillStyle=\"rgba(0,0,0,0.7)\";\n      \n        // console.log(zone.img+\" / \"+zzoone.imgCoords.topLeft.x+\" / \"+ zone.imgCoords.topLeft.y+\" / \"+ zone.imgCoords.width+\" / \"+ zone.imgCoords.height);\n        ctx.fillRect(0, 0, zone.imgCoords.width, zone.imgCoords.height);\n \n    \n    \n    }\n    \n//old version\n    calcDestination(position, destination, stage){\n       // console.log(stage);\n        let diffX=destination[0]-position.x;\n        let diffY=destination[1]-position.y;\n      //  console.log(diffY);\n        let shift=[diffX*stage, diffY*stage];\n      //  console.log(position);\n     //    console.log(destination);\n      //  console.log(shift);\n        return shift;\n    }\n    \n     calcAnimationPath(position : Point, points : Point[]){\n        let result = [{start:{time:0, point:position}, end:{time:0, point:{x:position.x, y:position.y}}, distance:0, relDistance:0}];\n        let ref = this;\n         points.forEach(function(p, pi){\n             result[pi].end.point=p;\n             result[pi].distance = ref.calcPathLength(result[pi].start.point, result[pi].end.point);\n             result.push({start:{time:0, point: p}, end:{time:0, point:{x:position.x, y:position.y}}, distance : 0, relDistance: 0});\n         });\n         \n         let distances = result.map((r)=>r.distance);\n        // console.log(\"total distance array: \" + distances);\n         let totalDistance = distances.reduce((tot,d)=>tot+d);\n         //  console.log(\"total distance: \" + totalDistance);\n         let counter = 0;\n          result.forEach(function(r, ri){\n             r.relDistance = r.distance/totalDistance;\n             r.start.time = counter;\n              counter+=r.relDistance;\n            r.end.time = counter;\n         });\n         \n         return result;\n         \n    }\n\n calcPathLength(a, b){\n        let sx = Math.abs(a.x-b.x);\n        let sy = Math.abs(a.y-b.y);\n        \n        let p = Math.sqrt(Math.pow(sx,2) + Math.pow(sy,2));\n        \n        return p;\n    }\n    \n    \n    applySetting(ctx, stg){\n       // ctx.globalAlpha=this.drawingSettings[stg].globalAlpha;\n        ctx.fillStyle=this.drawingSettings[stg].fillStyle;\n        ctx.strokeStyle=this.drawingSettings[stg].strokeStyle;\n        ctx.lineWidth=this.drawingSettings[stg].lineWidth;\n        ctx.shadowColor=this.drawingSettings[stg].shadowColor;\n        ctx.shadowBlur=this.drawingSettings[stg].shadowBlur;\n        \n        if(this.drawingSettings[stg].dashed){\n            ctx.setLineDash([10, 6])\n        }else{\n            ctx.setLineDash([])\n        }\n    }\n    \n    applyTransform(ctx,transformSetting){\n      // console.log(\">>> TRANSFORMING: \" + transformSetting.globalAlpha);\n        //console.log(transformSetting);\n    let scale = transformSetting.scale;\n\n        ctx.globalAlpha = transformSetting.globalAlpha;\n        ctx.translate(transformSetting.translate.x, transformSetting.translate.y); \n        ctx.scale(scale, scale); \n        \n    }\n    \n    \n    calcScaleToFit(img,canvas, zoom){\n  // console.log(canvas);\n    let wrapperWidth=canvas.nativeElement.offsetWidth;\n    let wrapperHeight=canvas.nativeElement.offsetHeight;\n    \n   // console.log(wrapperWidth*zoom +\" <> \"+wrapperHeight*zoom);\n   // console.log(img.width);\n    let ratioX=parseInt(wrapperWidth)/parseInt(img.width);\n    let ratioY=parseInt(wrapperHeight)/parseInt(img.height);\n    \n  //  console.log(ratioX +\" - \"+ratioY);\n    \n        let maxScale : number;\n        \n    if(ratioX<=ratioY){\n        maxScale = ratioX;\n    }else{\n        maxScale = ratioY;\n    }\n        \n    let centerX = (wrapperWidth-(img.width*maxScale))/2;   \n    let centerY = (wrapperHeight-(img.height*maxScale))/2;  \n        \n    let centerOrigX = (wrapperWidth-(img.width))/2;   \n    let centerOrigY = (wrapperHeight-(img.height))/2;  \n        \n     //   console.log({maxScale: maxScale, center : {x:centerX, y:centerY}});\n        \n        return {maxScale: maxScale, center : {x:centerX, y:centerY}, centerOrig:{x:centerOrigX, y:centerOrigY}};\n}\n \n        \n       stringToPath(pathString){\n        let coords=pathString.trim().split(/\\s+/);\n        let rsl=[];\n        coords.forEach((c)=>{\n            let xy=c.trim().split(\",\");\n         \n            rsl.push({x:xy[0], y:xy[1]});\n        });\n        return rsl;\n    }\n\n  //NOt USED\n    \n         drawTexture(ctx, zone, cat){\n           //  console.log(\"drawing texture\");\n      \n           // console.log(\"texture loaded\");\n           // zone.img.src=\"assets/images/textures/forest_tile.png\";\n         let texture=ctx.createPattern(zone.img, \"repeat\");\n            ctx.fillStyle=texture;\n         ctx.strokeStyle=\"transparent\";\n                ctx.beginPath();\n            ctx.moveTo(zone.points[0].x,zone.points[0].y);\n            \n            for(var p=1;p<zone.points.length;p++)\n            {\n             //    console.log(p);\n                ctx.lineTo(zone.points[p].x, zone.points[p].y);\n            }\n            \n            ctx.closePath();\n         \n         ctx.fill();\n            ctx.stroke();\n           \n       ctx.globalCompositeOperation='source-in';\n      zone.source=\"textures/forest_tile.png\";\n         //this.drawStaticImage(ctx,zone);)\n    //     console.log(texture);\n        //console.log(\"TEXTURE: /\"+texture+\" / \"+zone.imgCoords.topLeft.x+\" / \"+ zone.imgCoords.topLeft.y+\" / \"+ zone.imgCoords.width+\" / \"+ zone.imgCoords.height);\n        // ctx.fillStyle=\"transparent\";\n      //  ctx.drawImage(texture,zone.imgCoords.topLeft.x, zone.imgCoords.topLeft.y, zone.imgCoords.width, zone.imgCoords.height);\n       //ctx.fillStyle=\"blue\";\n        //ctx.fillRect(0,0,3000, 3000);\n      \n       ctx.globalCompositeOperation='source-over';\n       //this.applySetting(ctx,this.drawingSettings[cat]);\n           \n   \n       \n    }\n        \n        \n    }\n\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}